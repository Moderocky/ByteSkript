
function attempt_verification:
    verify:
        assert 1 is 1: "Number self-equality failed."
        assert 1 is not 2: "Number not-equals passed incorrectly."
    trigger:
        set {a} to 1
        assert {a} is 1: "Variable number set failed."

function input:
    trigger:
        set {a} to test_single(1)
        set {b} to test_double({a}, 5)
        assert {b} is 7: "Function return failed."

function test_single(thing):
    trigger:
        assert {thing} is 1: "Function argument was corrupted?"
        return {thing} + 1

function test_double(thing, plus):
    trigger:
        assert {thing} is test_single(1)
        assert {thing} is 2: "Function return failed."
        return {thing} + {plus}

function reflection:
    trigger:
        set {array} to (1, 2, 3)
        set {var} to function "reflect_target(a, b, c)"
        run {var} with (1, 2, 3)
        run {var} with {array}
        set {var} to function "reflect_target"
        run {var}
        set {list} to a new list
        set {func} to function "reflect_target (obj)"
        run {func} with a new array of ({list})
        assert index 0 in {list} is 1: "List index retrieval failed."
        set {func} to function "reflect_get"
        set {value} to result of {func}
        assert {value} is 2: "Dynamic return retrieval failed."

function reflect_get:
    trigger:
        return 2

function reflect_target:
    trigger:
        assert 1 is 1: "Reflective function call failed."

function reflect_target (a, b, c):
    trigger:
        assert {a} is 1: "Reflective function call arguments passed wrongly."
        assert {b} is 2: "Reflective function call arguments passed wrongly."

function reflect_target (list):
    trigger:
        add 1 to {list}

function external:
    trigger:
        set {var} to external_target() from skript/lambda
        assert {var} is 2: "External no-args function call returned wrongly."
        set {var} to external_target(6) from skript/lambda
        assert {var} is 6: "External with-args function call returned wrongly."

function skript_default:
    trigger:
        set {var} to get_class("skript")
        assert {var} is not null: "Get-class Skript function failed."
